<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nowace | Developer</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="background"></div>

    <div class="card fade-in">
        <div class="profile-section">
            <div class="avatar-wrapper">
                <img id="discord-avatar" src="https://cdn.discordapp.com/embed/avatars/0.png" alt="Nowace">
                <div id="status-dot" class="status-dot grey"></div>
            </div>
            
            <div class="user-info">
                <h1>Nowace</h1>
                <p class="bio">software engineer & dreamer</p>
            </div>
        </div>

        <div class="tech-stack">
            <h3>Technologies</h3>
            <div class="icons">
                <i class="fa-brands fa-js" title="JavaScript"></i>
                <i class="fa-brands fa-node" title="Node.js"></i>
                <i class="fa-brands fa-python" title="Python"></i>
                <i class="fa-brands fa-html5" title="HTML5"></i>
                <i class="fa-brands fa-css3-alt" title="CSS3"></i>
                <i class="fa-brands fa-react" title="React"></i>
                <i class="fa-solid fa-moon" title="Lua"></i>
                <i class="fa-solid fa-database" title="Database"></i>
            </div>
        </div>

        <div class="socials">
            <a href="https://instagram.com/nowace.ww" target="_blank" class="social-link">
                <i class="fa-brands fa-instagram"></i>
                <span>Instagram</span>
            </a>
            <div class="social-link" onclick="window.open('https://discord.com/users/938458334305058836', '_blank')">
                <i class="fa-brands fa-discord"></i>
                <span>Discord</span>
            </div>
        </div>
    </div>

    <script>
        const DISCORD_ID = "938458334305058836";
        
        async function fetchDiscordData() {
            try {
                // Lanyard API'ye istek atıyoruz
                const response = await fetch(`https://api.lanyard.rest/v1/users/${DISCORD_ID}`);
                const data = await response.json();
                
                if (data.success) {
                    const discordData = data.data;
                    
                    // 1. Profil Resmini Güncelle
                    const avatarElement = document.getElementById('discord-avatar');
                    if (discordData.discord_user.avatar) {
                        const avatarUrl = `https://cdn.discordapp.com/avatars/${DISCORD_ID}/${discordData.discord_user.avatar}.png?size=512`;
                        avatarElement.src = avatarUrl;
                    }

                    // 2. Durum Işığını Güncelle (Online/Offline)
                    const statusDot = document.getElementById('status-dot');
                    const status = discordData.discord_status;
                    
                    // Önceki renkleri temizle
                    statusDot.className = 'status-dot';
                    
                    if (status === 'online') statusDot.classList.add('green');
                    else if (status === 'idle') statusDot.classList.add('yellow');
                    else if (status === 'dnd') statusDot.classList.add('red');
                    else statusDot.classList.add('grey');
                }
            } catch (error) {
                console.error("Discord verisi çekilemedi:", error);
            }
        }

        // Sayfa açılınca verileri çek
        fetchDiscordData();
        // Her 60 saniyede bir güncelle
        setInterval(fetchDiscordData, 60000);
    </script>
</body>
</html>